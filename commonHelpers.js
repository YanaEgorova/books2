(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();class u{constructor(){this.BASE_URL="http://localhost:3000",this.END_POINT="/books"}getBooks(){const t=this.BASE_URL+this.END_POINT;return fetch(t).then(s=>{if(s.ok)return s.json();throw new Error(s.status)})}createBook(t){const s=this.BASE_URL+this.END_POINT,r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch(s,r).then(e=>{if(e.ok)return e.json();throw new Error(e.status)})}updateBook({id:t,...s}){const r=`${this.BASE_URL}${this.END_POINT}/${t}`,e={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};return fetch(r,e).then(n=>{if(n.ok)return n.json();throw new Error(n.status)})}resetBook({id:t,...s}){const r=`${this.BASE_URL}${this.END_POINT}/${t}`,e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};return fetch(r,e).then(n=>{if(n.ok)return n.json();throw new Error(n.status)})}deleteBook(t){const s=`${this.BASE_URL}${this.END_POINT}/${t}`;return fetch(s,{method:"DELETE"}).then(e=>{if(e.ok)return e.json();throw new Error(e.status)})}}const a={createFormEl:document.querySelector(".js-create-form"),resetFormEl:document.querySelector(".js-reset-form"),updateFormEl:document.querySelector(".js-update-form"),deleteFormEl:document.querySelector(".js-delete-form"),listEl:document.querySelector(".js-list")};a.createFormEl.addEventListener("submit",f);a.resetFormEl.addEventListener("submit",m);a.updateFormEl.addEventListener("submit",p);a.deleteFormEl.addEventListener("submit",h);a.listEl.addEventListener("click",d);function d(o){if(console.log(o.target),console.log(o.currentTarget),o.target===o.currentTarget)return;const t=o.target.closest("li").dataset.id;a.resetFormEl.elements.id.value=t,a.updateFormEl.elements.id.value=t,a.deleteFormEl.elements.id.value=t}const c=new u;function f(o){o.preventDefault();const t={};new FormData(o.target).forEach((r,e)=>{t[e]=r}),console.log(t),c.createBook(t).then(r=>{const e=i(r);a.listEl.insertAdjacentHTML("afterbegin",e)}),o.target.reset()}function m(o){o.preventDefault();const t={};new FormData(o.target).forEach((r,e)=>{t[e]=r}),c.resetBook(t).then(r=>{const e=document.querySelector(`[data-id=${t.id}]`),n=i(r);e.insertAdjacentHTML("afterend",n),e.remove()}),o.target.reset()}function p(o){const t={};new FormData(o.target).forEach((r,e)=>{r&&(t[e]=r)}),c.updateBook(t).then(r=>{const e=document.querySelector(`[data-id=${t.id}]`),n=i(r);e.insertAdjacentHTML("afterend",n),e.remove()}),o.target.reset()}function h(o){o.preventDefault();const t=o.target.elements.id.value;c.deleteBook(t).then(s=>{document.querySelector(`[data-id=${t}]`).remove()}),o.target.reset()}function i({id:o,author:t,title:s,description:r}){return`
       <li data-id="${o}">
        <p><span>ID:</span> ${o}</p>
        <p><span>Author:</span> ${t}</p>
        <p><span>Title:</span> ${s}</p>
        <p><span>Description:</span> ${r}</p>
      </li>
  `}function E(o){return o.map(i).reverse().join("")}function k(o){const t=E(o);a.listEl.innerHTML=t}c.getBooks().then(k).catch(g);function g(o){switch(o.message){case"404":console.log("404");break;case"401":console.log("401");break;default:console.log("Unknown error")}}
//# sourceMappingURL=commonHelpers.js.map
